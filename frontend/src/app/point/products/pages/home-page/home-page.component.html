<div class="container-lg h-100">

  <app-modal-editproducto-venta class="d-md-none" [producto]="producto"
    (editEvent)="eliminar(producto)"></app-modal-editproducto-venta>

  <div class="container-fluid tab pt-3 h-50 px-0 text-center">
    <table class="table table-hover table-striped align-middle" style="border-radius: 1em; overflow: hidden;">
      <thead>
        <tr class="table-info">
          <th>Producto</th>
          <th>Precio</th>
          <th>Cantidad</th>
          <th class="d-xs-none"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of ventaProductos, let i = index" [attr.data-bs-toggle]="modal" data-bs-target="#editProducto"
          (click)="editProducto(producto)">
          <td class="overflow-x-hidden text-nowrap" style="max-width: 1em;">{{ producto.descripcion | titlecase }}</td>
          <td>{{ producto.precio | currency }}</td>
          <td>{{ producto.cantidad }}</td>
          <td class="d-xs-none">
            <button [id]="producto.id+'add'" type="button" class="btn btn-primary btn-sm"
              (click)="cantidadVenta(1, producto)">
              <span class="material-symbols-outlined">
                add
              </span>
            </button>
            <button type="button" class="btn btn-danger btn-sm mx-1" (click)="eliminar(producto)">
              <span class="material-symbols-outlined">
                delete
              </span>
            </button>
            <button [id]="producto.id+'remove'" type="button" class="btn btn-primary btn-sm" (click)="cantidadVenta(-1, producto)">
              <span class="material-symbols-outlined">
                remove
              </span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="alert alert-info my-5" *ngIf="!ventaProductos.length">
      <strong>!Vende!</strong> <br> Escanea tus productos.
    </div>
  </div>

  <div class="d-flex my-2 justify-content-between align-items-center container-fluid">
    <button class="btn btn-primary" [attr.disabled]="isDisabledVender" (click)="venta()" type="button">Vender</button>
    <div>
      <span>Total </span>
      <span>{{ total | currency }}</span>
    </div>
  </div>

  <div class="container-fluid">
    <form (ngSubmit)='agregarProducto(item)'>
      <div class="input-group">
        <input name="productoInput" type="text" autocomplete="off" class="form-control input-group text-capitalize" placeholder="Buscar producto..."
          aria-label="Producto" [(ngModel)]="productoBuscado" (keyup)="getProductos()">
        <button class="btn btn-primary btn-outline-secondary" type="button" data-bs-toggle="modal"
          data-bs-target="#scanBarcode" (click)="camaraEstatus()">
          <span style="color: white;" class="material-symbols-outlined">barcode_scanner</span>
        </button>
        <button class="btn btn-primary" [attr.disabled]="isDisabledAgregar" type="submit">Agregar</button>
      </div>
    </form>
  </div>

  <div class="tab container-fluid" style="height: 15%;">
    <table class="table table-hover tab" style="border-radius: 1em;">
      <tbody>
        <tr *ngFor="let item of listProductos" class="table-dark" role="button" (click)="selectProducto(item)">
          <td>{{ item.descripcion | titlecase }}</td>
          <td>{{ item.precio | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<app-modal-scan-barcode [camara]="camara" (scanEvent)="scan($event)"></app-modal-scan-barcode>
